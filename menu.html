<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SESA Coffee | Luxury Menu Experience v45.0</title>
    
    <!-- Premium Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@700;900&family=Montserrat:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <style>
        :root {
            --gold: #c5a059; 
            --dark: #0f0a06;
            --secondary: #1d150e;
            --white: #ffffff;
            --cream: #fdfaf5;
            --danger: #e74c3c;
            --transition: all 0.6s cubic-bezier(0.165, 0.84, 0.44, 1);
        }

        /* --- GLOBAL BASE --- */
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Montserrat', sans-serif; }
        html { scroll-behavior: smooth; }
        body { background-color: var(--cream); color: var(--dark); overflow-x: hidden; }

        /* --- STORE CLOSED OVERLAY (SINKRON ADMIN) --- */
        #closed-overlay {
            display: none; 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(15, 10, 6, 0.98); z-index: 20000; 
            color: white; flex-direction: column; justify-content: center; 
            align-items: center; text-align: center; padding: 40px; 
            backdrop-filter: blur(25px);
        }
        #closed-overlay i { color: var(--gold); margin-bottom: 35px; filter: drop-shadow(0 0 25px rgba(197, 160, 89, 0.6)); }
        #closed-overlay h1 { font-family: 'Cinzel', serif; font-size: 3.5rem; letter-spacing: 8px; color: var(--gold); }
        #closed-overlay p { font-size: 1.3rem; margin-top: 30px; max-width: 750px; line-height: 2; opacity: 0.95; font-weight: 500; }
        #closed-overlay .schedule-footer { margin-top: 60px; font-weight: 800; letter-spacing: 4px; color: var(--gold); text-transform: uppercase; border-top: 1px solid rgba(197,160,89,0.3); padding-top: 20px; }

        /* --- NAVIGATION DESKTOP & TABLET --- */
        header {
            position: fixed; top: 0; width: 100%; z-index: 9000;
            padding: 30px 0; background: transparent; transition: var(--transition);
            border-bottom: 1px solid rgba(197, 160, 89, 0.1);
        }
        header.scrolled { padding: 15px 0; background: rgba(15, 10, 6, 0.98); backdrop-filter: blur(15px); box-shadow: 0 5px 30px rgba(0,0,0,0.3); }

        .navbar { 
            padding: 0 8%; display: flex; justify-content: space-between; 
            align-items: center; max-width: 1600px; margin: auto; 
        }

        .logo { text-decoration: none; display: flex; align-items: center; transition: 0.3s; }
        .logo .sesa { font-family: 'Cinzel', serif; font-size: 2.2rem; font-weight: 900; color: var(--white); }
        .logo .coffee { font-family: 'Montserrat', sans-serif; font-size: 2.2rem; font-weight: 800; color: var(--gold); margin-left: 10px; }

        .nav-links { display: flex; gap: 40px; list-style: none; align-items: center; }
        .nav-links a { 
            text-decoration: none; color: var(--white); font-weight: 700; 
            text-transform: uppercase; font-size: 0.85rem; letter-spacing: 2px; 
            position: relative; transition: 0.3s;
        }

        /* Gold Underline Logic */
        .nav-links a::after {
            content: ''; position: absolute; width: 0; height: 3px; 
            bottom: -10px; left: 0; background: var(--gold); transition: 0.3s;
        }
        .nav-links a:hover::after, .nav-links a.active::after { width: 100%; }
        .nav-links a.active { color: var(--gold); }

        .menu-toggle { display: none; cursor: pointer; color: var(--white); font-size: 1.8rem; }

        /* --- MOBILE DRAWER (SETENGAH LAYAR - STANDART SIZE) --- */
        #mobile-backdrop {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7); z-index: 9998; display: none; opacity: 0; transition: 0.5s;
        }
        #mobile-backdrop.active { display: block; opacity: 1; }

        .mobile-drawer {
            position: fixed; top: 0; right: -80%; width: 75%; height: 100vh;
            background: #0d0d0d; z-index: 9999; padding: 40px 30px;
            display: flex; flex-direction: column; transition: 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            box-shadow: -15px 0 40px rgba(0,0,0,0.6); border-left: 2px solid var(--gold);
        }
        .mobile-drawer.active { right: 0; }
        .close-drawer { align-self: flex-end; color: var(--white); font-size: 2.2rem; cursor: pointer; margin-bottom: 40px; transition: 0.3s; }
        .close-drawer:hover { color: var(--gold); transform: rotate(90deg); }
        
        .drawer-links { list-style: none; text-align: center; margin-top: 20px; }
        .drawer-links li { margin: 25px 0; overflow: hidden; }
        .drawer-links a {
            color: var(--white); text-decoration: none; font-size: 1.6rem;
            font-weight: 800; text-transform: uppercase; letter-spacing: 4px;
            position: relative; transition: 0.4s; display: inline-block;
        }
        .drawer-links a::after {
            content: ''; position: absolute; width: 0; height: 3px; 
            bottom: -10px; left: 50%; transform: translateX(-50%);
            background: var(--gold); transition: 0.4s;
        }
        .drawer-links a.active::after { width: 70%; }

        /* --- HERO --- */
        .hero {
            height: 55vh; background: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.6)), 
            url('https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?q=80&w=2000');
            background-size: cover; background-position: center;
            display: flex; flex-direction: column; justify-content: center; align-items: center; color: white;
            border-bottom: 12px solid var(--gold);
        }
        .hero h1 { font-family: 'Cinzel', serif; font-size: clamp(3rem, 8vw, 6rem); letter-spacing: 15px; text-shadow: 0 10px 30px rgba(0,0,0,0.5); }

        /* --- CONTAINER --- */
        .container { max-width: 1400px; margin: auto; padding: 80px 8%; }

        .section-header { text-align: center; max-width: 900px; margin: 0 auto 80px; animation: fadeInUp 1s ease; }
        .section-header h2 { font-family: 'Cinzel', serif; font-size: 3rem; margin-bottom: 20px; color: var(--dark); }
        .section-header p { line-height: 2; color: #555; font-size: 1.1rem; }

        /* --- CATEGORY CARDS --- */
        .cat-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 40px; }
        .cat-card {
            background: var(--white); padding: 70px 45px; border-radius: 55px; text-align: center;
            box-shadow: var(--shadow); cursor: pointer; transition: var(--transition);
            border-top: 10px solid var(--gold); position: relative; overflow: hidden;
        }
        .cat-card:hover { transform: translateY(-20px) scale(1.02); box-shadow: 0 40px 80px rgba(0,0,0,0.15); }
        .cat-card i { font-size: 4.5rem; color: var(--gold); margin-bottom: 35px; display: block; }
        .cat-card h3 { font-family: 'Cinzel', serif; font-size: 2.2rem; margin-bottom: 25px; letter-spacing: 2px; }
        .cat-card p { color: #666; font-size: 1rem; line-height: 1.8; }

        /* --- PRODUCT GRID --- */
        #menu-view { display: none; }
        .back-btn { 
            display: inline-flex; align-items: center; gap: 15px; background: var(--dark); 
            color: white; padding: 18px 45px; border-radius: 100px; cursor: pointer; 
            font-weight: 800; text-transform: uppercase; font-size: 0.8rem; margin-bottom: 60px;
        }
        .back-btn:hover { background: var(--gold); transform: translateX(-10px); }

        .prod-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 45px; }
        .prod-card {
            background: var(--white); border-radius: 50px; overflow: hidden; position: relative;
            box-shadow: var(--shadow); transition: var(--transition); cursor: pointer;
            display: flex; flex-direction: column; height: auto;
        }
        .prod-card:hover { transform: translateY(-15px); }

        /* SOLD OUT EFFECT */
        .prod-card.is-habis { filter: grayscale(1); opacity: 0.7; pointer-events: none; }
        .sold-out-badge {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.4); display: flex; justify-content: center;
            align-items: center; z-index: 30;
        }
        .sold-out-badge span {
            background: white; color: var(--danger); font-weight: 900; 
            font-size: 2rem; padding: 10px 30px; border: 5px solid var(--danger);
            transform: rotate(-15deg); font-family: 'Cinzel', serif;
        }

        .prod-img { width: 100%; height: 380px; overflow: hidden; position: relative; }
        .prod-img img { width: 100%; height: 100%; object-fit: cover; transition: 1.2s; }
        .prod-card:hover .prod-img img { transform: scale(1.15); }

        /* BADGES (FIXED POSITION) */
        .badge-container { position: absolute; top: 25px; right: 25px; display: flex; flex-direction: column; gap: 10px; z-index: 20; }
        .badge-lux { padding: 10px 22px; border-radius: 50px; font-weight: 800; font-size: 0.65rem; text-transform: uppercase; color: white; text-align: center; }
        .badge-best { background: var(--gold); box-shadow: 0 5px 15px rgba(197, 160, 89, 0.4); }
        .badge-promo { background: var(--danger); animation: glowPulse 2s infinite; }

        .prod-info { padding: 35px; flex-grow: 1; display: flex; flex-direction: column; border-top: 1px solid #f2f2f2; }
        .prod-info h3 { font-family: 'Cinzel', serif; font-size: 1.7rem; margin-bottom: 12px; line-height: 1.3; }
        .prod-info .price { color: var(--gold); font-weight: 900; font-size: 1.6rem; margin-top: auto; }

        /* --- LUXURY MODAL --- */
        .modal-overlay {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 9999; justify-content: center; align-items: center; padding: 20px;
            backdrop-filter: blur(15px);
        }
        .modal-box {
            background: white; width: 100%; max-width: 850px; border-radius: 50px;
            padding: 75px 65px; position: relative; animation: zoomIn 0.5s ease;
            max-height: 90vh; overflow-y: auto;
        }
        .close-modal { position: absolute; top: 35px; right: 45px; font-size: 3rem; cursor: pointer; color: #333; transition: 0.3s; }
        .close-modal:hover { color: var(--gold); transform: rotate(90deg); }
        
        .m-cat { color: var(--gold); font-weight: 800; text-transform: uppercase; letter-spacing: 4px; font-size: 0.9rem; display: block; margin-bottom: 10px; }
        .m-title { font-family: 'Cinzel', serif; font-size: 3.5rem; line-height: 1.1; margin-bottom: 25px; }
        .m-desc { 
            font-size: 1.2rem; line-height: 2; color: #444; 
            border-left: 8px solid var(--gold); padding-left: 25px; margin-bottom: 45px; 
        }
        
        .variant-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; margin-bottom: 45px; }
        .variant-item {
            border: 3px solid #eee; border-radius: 30px; padding: 30px; text-align: center; cursor: pointer; transition: 0.3s;
        }
        .variant-item.active { border-color: var(--gold); background: #fffdf5; transform: scale(1.05); }
        .variant-item b { display: block; font-size: 0.9rem; text-transform: uppercase; margin-bottom: 8px; }
        .variant-item span { font-size: 1.8rem; font-weight: 900; color: var(--gold); }
        .strike-price { font-size: 1rem; text-decoration: line-through; color: #bbb; display: block; margin-bottom: 5px; }

        .btn-order-master {
            width: 100%; padding: 25px; background: var(--dark); color: white; border: none;
            border-radius: 25px; font-size: 1.4rem; font-weight: 900; cursor: pointer;
            text-transform: uppercase; letter-spacing: 5px; transition: 0.4s;
        }
        .btn-order-master:hover { background: var(--gold); transform: translateY(-5px); box-shadow: 0 20px 40px rgba(197, 160, 89, 0.3); }

        /* --- CART FLOAT "ORDER NOW" (SMALLER & REFINED) --- */
        .cart-float {
            position: fixed; bottom: 45px; right: 45px; padding: 10px 30px 10px 10px;
            background: var(--dark); color: white; border-radius: 100px; display: flex;
            align-items: center; gap: 15px; box-shadow: 0 20px 50px rgba(0,0,0,0.4);
            text-decoration: none; z-index: 8500; transition: 0.4s; border: 2px solid var(--gold);
        }
        .cart-float:hover { transform: scale(1.08); box-shadow: 0 25px 60px rgba(197,160,89,0.3); }
        .cart-icon-box { width: 55px; height: 55px; background: var(--white); color: var(--dark); border-radius: 50%; display: flex; justify-content: center; align-items: center; position: relative; }
        .cart-float span.order-text { font-family: 'Cinzel', serif; font-weight: 900; letter-spacing: 3px; font-size: 1.1rem; color: var(--white); }
        .cart-num { position: absolute; top: -5px; right: -5px; background: var(--danger); width: 28px; height: 28px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 0.85rem; font-weight: 900; border: 3px solid var(--dark); color: white; }

        @keyframes glowPulse { 0% { box-shadow: 0 0 5px var(--danger); } 50% { box-shadow: 0 0 20px var(--danger); } 100% { box-shadow: 0 0 5px var(--danger); } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes zoomIn { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        @media (max-width: 768px) {
            header { padding: 20px 0; }
            .nav-links { display: none; }
            .menu-toggle { display: block; }
            .hero h1 { font-size: 2.8rem; }
            .container { padding: 40px 5%; }
            .cat-grid { grid-template-columns: 1fr; }
            .prod-grid { grid-template-columns: 1fr; }
            .variant-grid { grid-template-columns: 1fr; }
            .modal-box { padding: 50px 30px; }
            .m-title { font-size: 2.2rem; }
            .cart-float { bottom: 30px; right: 25px; padding: 8px 20px 8px 8px; }
            .cart-icon-box { width: 45px; height: 45px; }
            .cart-float span.order-text { font-size: 0.9rem; letter-spacing: 2px; }
        }
    </style>
</head>
<body>

    <!-- CLOSED OVERLAY -->
    <div id="closed-overlay">
        <i class="fas fa-moon fa-6x"></i>
        <h1>SESA IS CLOSED</h1>
        <p>Maaf toko tutup balik lagi jam 9 pagi sampe jam 10 malam kalo buat senin dan jumat, kalo sabtu dan minggu jam 10 sampe jam 12 malam.</p>
        <div class="schedule-footer">SESA COFFEE & KITCHEN PIK 2</div>
    </div>

    <!-- MOBILE DRAWER (75% WIDTH) -->
    <div id="mobile-backdrop" onclick="toggleDrawer()"></div>
    <div class="mobile-drawer" id="mobileDrawer">
        <span class="close-drawer" onclick="toggleDrawer()">&times;</span>
        <div style="text-align: center; margin-bottom: 20px;">
            <a href="index.html" class="logo">
                <span class="sesa" style="color:white">SESA</span>
                <span class="coffee">COFFEE</span>
            </a>
        </div>
        <ul class="drawer-links">
            <li><a href="index.html">HOME</a></li>
            <li><a href="menu.html" class="active">MENU</a></li>
            <li><a href="order.html">ORDER</a></li>
            <li><a href="location.html">LOCATION</a></li>
            <li><a href="contact.html">CONTACT</a></li>
        </ul>
    </div>

    <!-- NAVBAR -->
    <header id="header">
        <nav class="navbar">
            <a href="index.html" class="logo">
                <span class="sesa">SESA</span>
                <span class="coffee">COFFEE</span>
            </a>
            <ul class="nav-links">
                <li><a href="index.html">HOME</a></li>
                <li><a href="menu.html" class="active">MENU</a></li>
                <li><a href="order.html">ORDER</a></li>
                <li><a href="location.html">LOCATION</a></li>
                <li><a href="contact.html">CONTACT</a></li>
            </ul>
            <div class="menu-toggle" onclick="toggleDrawer()"><i class="fas fa-bars"></i></div>
        </nav>
    </header>

    <div class="hero">
        <h1>THE MENU</h1>
    </div>

    <div class="container">
        <div id="cat-view">
            <div class="section-header">
                <h2>Cuisine Masterpieces</h2>
                <p>Welcome to SESA, where every ingredient is a promise of uncompromising quality. Our collections are meticulously curated to bring you the finest Nusantara heritage blended with the sophisticated elegance of modern artisanal craftsmanship. Experience luxury in every bite and every sip at PIK 2.</p>
            </div>
            <div class="cat-grid">
                <div class="cat-card" onclick="openCat('menu_paket')">
                    <i class="fas fa-crown"></i>
                    <h3>Executive Bundles</h3>
                    <p>A curated symphony of gourmet pairings designed for total satisfaction. Our premium set menus offer a holistic culinary journey, blending signature main courses with artisanal beverages for an unrivaled SESA experience.</p>
                </div>
                <div class="cat-card" onclick="openCat('makanan_berat')">
                    <i class="fas fa-utensils"></i>
                    <h3>Imperial Mains</h3>
                    <p>Traditional heritage recipes from across the archipelago, refined for the elite palate. Bold spices and modern culinary techniques unite in every exquisite, hand-crafted dish served at the highest standards.</p>
                </div>
                <div class="cat-card" onclick="openCat('coffee')">
                    <i class="fas fa-coffee"></i>
                    <h3>Artisanal Coffee</h3>
                    <p>Rare single-origin Arabica beans sourced from high-altitude estates. Precision-roasted and brewed by master baristas to deliver the perfect extraction of aroma, soul, and luxurious character in every cup.</p>
                </div>
                <div class="cat-card" onclick="openCat('cocktail')">
                    <i class="fas fa-glass-martini-alt"></i>
                    <h3>Signature Cocktails</h3>
                    <p>Elite alcoholic fusions meticulously hand-mixed by our master mixologists. A sophisticated blend of premium spirits, house-made botanical syrups, and the freshest artisanal ingredients for your evening ritual.</p>
                </div>
                <div class="cat-card" onclick="openCat('mocktail')">
                    <i class="fas fa-wine-glass"></i>
                    <h3>Fresh Mocktails</h3>
                    <p>A celebration of pure, explosive fruit infusions and sparkling botanical waters. Refreshing, vibrant elixirs designed to enchant your daytime experience with sophisticated flavors and no alcohol content.</p>
                </div>
                <div class="cat-card" onclick="openCat('non_coffee')">
                    <i class="fas fa-leaf"></i>
                    <h3>Elite Botanicals</h3>
                    <p>Experience the finest ceremonial grade Matcha, decadent Artisan Chocolates, and soothing herbal blends. Sophisticated caffeine-free alternatives crafted for your ultimate moments of deep relaxation and wellness.</p>
                </div>
            </div>
        </div>

        <div id="menu-view">
            <div class="back-btn" onclick="exitCat()"><i class="fas fa-chevron-left"></i> BACK TO COLLECTIONS</div>
            <h2 id="cat-label-top" style="font-family:'Cinzel'; font-size:3.5rem; margin-bottom:60px; border-bottom:8px solid var(--gold); display:inline-block; padding-bottom:10px;"></h2>
            <div class="prod-grid" id="product-container"></div>
        </div>
    </div>

    <!-- DETAIL MODAL -->
    <div class="modal-overlay" id="luxModal">
        <div class="modal-box">
            <span class="close-modal" onclick="closeModal()">&times;</span>
            <div id="modal-content-injector"></div>
            <button class="btn-order-master" onclick="addToCartFinal()">ORDER NOW <i class="fas fa-chevron-right" style="margin-left:10px"></i></button>
        </div>
    </div>

    <!-- CART FLOAT "ORDER NOW" -->
    <a href="order.html" class="cart-float">
        <div class="cart-icon-box">
            <i class="fas fa-shopping-bag fa-xl"></i>
            <span class="cart-num" id="cCount">0</span>
        </div>
        <span class="order-text" id="orderText">ORDER NOW</span>
    </a>

    <!-- SYSTEM SCRIPT -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = { databaseURL: "https://sesa-coffee-default-rtdb.asia-southeast1.firebasedatabase.app" };
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        let menuCache = {};
        let activeCat = null;

        // Sync Store Status
        onValue(ref(db, 'store_config/is_open'), (snap) => {
            const isOpen = snap.val();
            document.getElementById('closed-overlay').style.display = isOpen ? 'none' : 'flex';
        });

        // Scroll Navbar
        window.onscroll = () => {
            const h = document.getElementById('header');
            if(window.scrollY > 80) h.classList.add('scrolled');
            else h.classList.remove('scrolled');
        };

        window.toggleDrawer = () => {
            document.getElementById('mobileDrawer').classList.toggle('active');
            document.getElementById('mobile-backdrop').classList.toggle('active');
        };

        // Realtime Data
        onValue(ref(db, 'store_menu'), (snap) => {
            menuCache = snap.val() || {};
            if(activeCat) renderProducts(activeCat);
        });

        window.openCat = (cat) => {
            activeCat = cat;
            document.getElementById('cat-view').style.display = 'none';
            document.getElementById('menu-view').style.display = 'block';
            document.getElementById('cat-label-top').innerText = cat.replace('_',' ').toUpperCase();
            renderProducts(cat);
            window.scrollTo({top: 0, behavior: 'smooth'});
        };

        window.exitCat = () => {
            activeCat = null;
            document.getElementById('cat-view').style.display = 'block';
            document.getElementById('menu-view').style.display = 'none';
        };

        function renderProducts(cat) {
            const grid = document.getElementById('product-container');
            grid.innerHTML = "";
            Object.values(menuCache).filter(m => m.cat === cat).forEach(m => {
                const isDrink = ['coffee', 'non_coffee', 'cocktail', 'mocktail'].includes(m.cat);
                const hasPromo = m.isPromo || m.isPromoHot || m.isPromoCold;
                const isHabis = m.status === 'habis';
                
                let pDisp = m.priceNormal;
                if(isDrink) {
                    const pH = m.isPromoHot ? m.priceHotPromo : m.priceHot;
                    const pC = m.isPromoCold ? m.priceColdPromo : m.priceCold;
                    pDisp = Math.min(pH || 999999, pC || 999999);
                } else if(m.isPromo) {
                    pDisp = m.pricePromo;
                }

                grid.innerHTML += `
                    <div class="prod-card ${isHabis ? 'is-habis' : ''}" onclick="${isHabis ? '' : `openDetail('${m.id}')`}">
                        ${isHabis ? `<div class="sold-out-badge"><span>SOLD OUT</span></div>` : ''}
                        <div class="badge-container">
                            ${m.isBest ? '<div class="badge-lux badge-best">Best Seller</div>' : ''}
                            ${hasPromo ? '<div class="badge-lux badge-promo">On Sale</div>' : ''}
                        </div>
                        <div class="prod-img"><img src="${m.img}" onerror="this.src='https://images.unsplash.com/photo-1541167760496-1628856ab772?q=80&w=800'"></div>
                        <div class="prod-info">
                            <h3>${m.name}</h3>
                            <p class="price">Rp ${pDisp.toLocaleString()}</p>
                        </div>
                    </div>`;
            });
        }

        window.openDetail = (id) => {
            const m = menuCache[id];
            const isDrink = ['coffee', 'non_coffee', 'cocktail', 'mocktail'].includes(m.cat);
            const target = document.getElementById('modal-content-injector');
            
            target.innerHTML = `
                <span class="m-cat">${m.cat.replace('_',' ')}</span>
                <h2 class="m-title">${m.name}</h2>
                <div class="m-desc">${m.desc || 'A signature SESA creation, meticulously prepared using the finest ingredients to ensure a luxurious sensory experience.'}</div>
                
                ${isDrink ? `
                <span style="font-weight:800; font-size:0.8rem; text-transform:uppercase; margin-bottom:20px; display:block; letter-spacing:2px">Choose Serving:</span>
                <div class="variant-grid">
                    <div class="variant-item active" id="v-hot" onclick="setV('HOT', ${m.isPromoHot ? m.priceHotPromo : m.priceHot})">
                        <b>WARM SERVING (HOT)</b>
                        ${m.isPromoHot ? `<small class="strike-price">Rp ${m.priceHot.toLocaleString()}</small>` : ''}
                        <span>Rp ${(m.isPromoHot ? m.priceHotPromo : m.priceHot).toLocaleString()}</span>
                    </div>
                    <div class="variant-item" id="v-ice" onclick="setV('ICE', ${m.isPromoCold ? m.priceColdPromo : m.priceCold})">
                        <b>CHILLED SERVING (COLD)</b>
                        ${m.isPromoCold ? `<small class="strike-price">Rp ${m.priceCold.toLocaleString()}</small>` : ''}
                        <span>Rp ${(m.isPromoCold ? m.priceColdPromo : m.priceCold).toLocaleString()}</span>
                    </div>
                </div>` : `
                <div style="margin-bottom:40px">
                    ${m.isPromo ? `<small class="strike-price">Rp ${m.priceNormal.toLocaleString()}</small>` : ''}
                    <span style="font-size:2.8rem; font-weight:900; color:var(--gold)">Rp ${(m.isPromo ? m.pricePromo : m.priceNormal).toLocaleString()}</span>
                </div>`}
            `;

            let initialP = isDrink ? (m.isPromoHot ? m.priceHotPromo : m.priceHot) : (m.isPromo ? m.pricePromo : m.priceNormal);
            window.currentOrder = { id: m.id, type: isDrink ? 'HOT' : 'Standard', price: initialP };
            document.getElementById('luxModal').style.display = 'flex';
        };

        window.setV = (type, price) => {
            document.querySelectorAll('.variant-item').forEach(v => v.classList.remove('active'));
            document.getElementById('v-' + type.toLowerCase()).classList.add('active');
            window.currentOrder.type = type;
            window.currentOrder.price = price;
        };

        window.addToCartFinal = () => {
            const m = menuCache[window.currentOrder.id];
            let cart = JSON.parse(localStorage.getItem('sesa_cart')) || [];
            
            const isP = (window.currentOrder.type === 'HOT' && m.isPromoHot) || 
                       (window.currentOrder.type === 'ICE' && m.isPromoCold) || 
                       (window.currentOrder.type === 'Standard' && m.isPromo);

            cart.push({
                name: `${m.name} (${window.currentOrder.type})`,
                price: window.currentOrder.price,
                qty: 1,
                isPromo: isP
            });

            localStorage.setItem('sesa_cart', JSON.stringify(cart));
            updateBadge(); 
            closeModal(); // Otomatis tutup modal setelah order
            alert("Perfect choice. Added to your order.");
        };

        window.updateBadge = () => {
            const c = JSON.parse(localStorage.getItem('sesa_cart')) || [];
            const count = c.length;
            document.getElementById('cCount').innerText = count;
            document.getElementById('orderText').innerText = count > 0 ? `${count} ITEMS - ORDER NOW` : 'ORDER NOW';
        };

        window.closeModal = () => document.getElementById('luxModal').style.display = 'none';
        window.onload = updateBadge;
    </script>
</body>
</html>